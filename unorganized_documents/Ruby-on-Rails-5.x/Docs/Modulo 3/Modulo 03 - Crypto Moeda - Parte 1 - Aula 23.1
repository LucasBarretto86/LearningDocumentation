
MODULO 03 - Crypto Waller - Parte 1

AULA 23.1 - Criando Rake tasks

-----------------------------------------------------------------

O Rails também permite que criemos nossas proprias taks, para criamos nossa task devemos executar o comando rails g task <grupo> <nome_da_task>
	EXEMPLO:

		rails g task dev init

Após a executação deste comando o Rails cria um arquivo .rake em 'lib/tasks/'

	Usando o seed que criamos na aula anterior iremos criar uma task que ja execute a reinicialização do nosso banco carregando as seeds que indicamos.

	EXEMPLO: No arquivo criado iremos definir a nossa task conforme abaixo:
		namespace :dev do
		  desc "Initialize enviroment reloading database using seeds file" <--- Descrição da task (rails -T)

		  task init: :environment do
			  if Rails.env.development?
			    puts %x(rails db:drop db:create db:migrate db:seed) <---- o metodo %x() nos permite realizar comandos do terminal via Ruby, como parametro está os comandos que serão realizados)
			  end
		  end
		end

Se consultarmos as Tasks, iremos verificar a task criada:

		rails -T dev 
			rails dev:cache  # Toggle development mode caching on/off
			rails dev:init   # Initialize enviroment reloading database using seeds file


Ao executar o comando da task, iremos observar o detalhamento:
	rails dev:init

	Dropped database 'db/development.sqlite3'
	Dropped database 'db/test.sqlite3'
	Created database 'db/development.sqlite3'
	Created database 'db/test.sqlite3'
	== 20190513004504 CreateCoins: migrating ======================================
	-- create_table(:coins)
	   -> 0.0020s
	== 20190513004504 CreateCoins: migrated (0.0021s) =============================

